# Use Cases

## UC-1: Валидация TypeScript проекта

**Актор:** Разработчик

**Предусловия:**
- Проект содержит `tests/steps/*.ts` файлы
- dev-pomogator установлен с хуками

**Основной поток:**
1. Разработчик работает с AI агентом (Cursor/Claude)
2. Разработчик завершает сессию (stop)
3. Хук находит `*.steps.ts` файлы
4. Хук парсит step definitions
5. Хук анализирует качество Then степов
6. Хук генерирует отчёт
7. Хук выводит сводку в консоль

**Постусловия:**
- Файл `steps-validation-report.md` создан
- Предупреждение выведено если есть BAD степы

---

## UC-2: Валидация Python проекта

**Актор:** Разработчик

**Предусловия:**
- Проект содержит `*_steps.py` файлы (Behave/pytest-bdd)
- dev-pomogator установлен с хуками

**Основной поток:**
1. Разработчик работает с AI агентом
2. Разработчик завершает сессию
3. Хук находит `*_steps.py` файлы
4. Хук парсит `@given`, `@when`, `@then` декораторы
5. Хук проверяет наличие `assert` в Then степах
6. Хук генерирует отчёт

**Постусловия:**
- Отчёт содержит информацию о Python степах

---

## UC-3: Валидация C# проекта

**Актор:** Разработчик

**Предусловия:**
- Проект содержит `*Steps.cs` файлы (SpecFlow/Reqnroll)
- dev-pomogator установлен с хуками

**Основной поток:**
1. Разработчик работает с AI агентом
2. Разработчик завершает сессию
3. Хук находит `*Steps.cs` файлы
4. Хук парсит `[Given]`, `[When]`, `[Then]` атрибуты
5. Хук проверяет наличие `Assert.` или `.Should()` в Then степах
6. Хук генерирует отчёт

**Постусловия:**
- Отчёт содержит информацию о C# степах

---

## UC-4: Отключение валидации

**Актор:** Разработчик

**Предусловия:**
- Разработчик сознательно пишет заглушки
- Не хочет видеть предупреждения

**Основной поток:**
1. Разработчик создаёт `.steps-validator.yaml`
2. Устанавливает `enabled: false`
3. Хук на stop проверяет конфигурацию
4. Хук пропускает валидацию

**Постусловия:**
- Валидация не выполняется
- Отчёт не создаётся

---

## UC-5: Игнорирование конкретных файлов

**Актор:** Разработчик

**Предусловия:**
- Есть legacy файлы с заглушками
- Новые файлы должны валидироваться

**Основной поток:**
1. Разработчик создаёт `.steps-validator.yaml`
2. Добавляет `ignore: ["**/legacy_steps.py"]`
3. Хук пропускает указанные файлы
4. Остальные файлы валидируются

**Постусловия:**
- Legacy файлы не в отчёте
- Новые файлы проверены

---

## UC-6: Проект без step definitions

**Актор:** Разработчик

**Предусловия:**
- Проект не использует BDD
- Нет step definition файлов

**Основной поток:**
1. Хук ищет step definition файлы
2. Файлы не найдены
3. Хук завершается без действий

**Постусловия:**
- Отчёт не создаётся
- Ничего не выводится в консоль

---

## UC-7: Ошибка парсинга

**Актор:** Система

**Предусловия:**
- Файл содержит синтаксическую ошибку
- Или нестандартный формат

**Основной поток:**
1. Хук пытается распарсить файл
2. Возникает ошибка
3. Хук логирует ошибку в `~/.dev-pomogator/logs/`
4. Хук пропускает файл
5. Хук продолжает с остальными файлами

**Постусловия:**
- Ошибка в логе
- Остальные файлы в отчёте
- Пользователь не видит стектрейс
