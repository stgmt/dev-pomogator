# Нефункциональные требования (NFR)

## NFR-1: Производительность

**Требование:** Валидация должна завершаться менее чем за 5 секунд для проекта с 100 step definition файлами.

**Обоснование:** Хук запускается на stop событие, не должен задерживать пользователя.

---

## NFR-2: Переносимость

**Требование:** Хук должен работать на Windows, macOS и Linux.

**Реализация:**
- Использовать `path.join()` вместо `/`
- Корректно определять home directory
- Не использовать platform-specific команды

---

## NFR-3: Минимальные зависимости

**Требование:** Хук не должен требовать установки дополнительных пакетов.

**Реализация:**
- Использовать только встроенные Node.js/Bun модули
- `fs`, `path`, `os` — разрешены
- npm пакеты — запрещены

---

## NFR-4: Graceful Degradation

**Требование:** При ошибках парсинга хук должен продолжать работу с оставшимися файлами.

**Поведение:**
- Ошибка в одном файле не останавливает весь процесс
- Проблемный файл пропускается с логированием
- Отчёт генерируется по успешно распарсенным файлам

---

## NFR-5: Совместимость с IDE

**Требование:** Хук должен корректно работать в Cursor и Claude Desktop.

**Тестирование:**
- Cursor на Windows
- Cursor на macOS
- Claude Desktop

---

## NFR-6: Логирование

**Требование:** Все ошибки должны логироваться для отладки.

**Формат лога:**
```
[2026-01-27 10:30:00] ERROR: Failed to parse installer.steps.ts
  Reason: Unexpected token at line 42
  Stack: ...
```

**Путь:** `~/.dev-pomogator/logs/steps-validator.log`

---

## NFR-7: Идемпотентность

**Требование:** Повторный запуск хука должен давать тот же результат.

**Реализация:**
- Перезаписывать `steps-validation-report.md`
- Не накапливать данные между запусками

---

## NFR-8: Тестируемость

**Требование:** Код должен быть покрыт E2E тестами с изолированными фикстурами.

**Фикстуры:**
- TypeScript проект с хорошими/плохими степами
- Python проект с хорошими/плохими степами
- C# проект с хорошими/плохими степами
